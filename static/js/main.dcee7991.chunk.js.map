{"version":3,"sources":["components/Bar.js","components/CardColor.js","components/Card.js","components/CardList.js","components/SelectedCard.js","components/Chart.js","components/App.js","index.js"],"names":["Bar","counties","countySelected","setCountySelected","className","value","onChange","e","target","map","county","index","CardColor","aqi","color","Card","district","setSelectedCard","data","onClick","selectedCardHandler","CardList","dataSelected","SiteName","AQI","SiteId","SelectedCard","selectedCard","O3","PM10","CO","SO2","NO2","Chart","useState","setDataSelected","useEffect","defaultSelectedCounty","filter","item","County","PublishTime","App","setCounties","dataWithColor","setDataWithColor","a","fetch","response","json","records","record","Object","keys","forEach","k","repeatedCounties","nonRepeatedCounties","arr","indexOf","dataWithColors","notdefault","console","log","getData","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.dcee7991.chunk.js","sourcesContent":["import React from 'react';\n\nconst Bar = ({counties, countySelected, setCountySelected}) => {\n\n  const countySelectedHandler = (e) => {\n    setCountySelected(e.target.value);\n  }\n\n  return (\n    <div className=\"bar__container\">\n      <h3 className=\"bar__title\">空氣品質指標（AQI）</h3>\n      <select className=\"bar__selections\" value={countySelected} onChange={countySelectedHandler}>\n        <option value=\"\">請選擇地區</option>\n        {counties.map((county, index) => <option value={county} key={index}>{county}</option>)}\n      </select>\n      <div className=\"bar__aqi-container\">\n        <div className=\"bar__aqi-box\">\n          <div className=\"bar__aqi-num bar__aqi-num--1\"><p>0 - 50</p></div>\n          <div className=\"bar__aqi-info\"><p>良好</p></div>\n        </div>\n        <div className=\"bar__aqi-box\">\n          <div className=\"bar__aqi-num bar__aqi-num--2\"><p>51 - 100</p></div>\n          <div className=\"bar__aqi-info\"><p>普通</p></div>\n        </div>\n        <div className=\"bar__aqi-box\">\n          <div className=\"bar__aqi-num bar__aqi-num--3\"><p>101 - 150</p></div>\n          <div className=\"bar__aqi-info\"><p>敏感</p></div>\n        </div>\n        <div className=\"bar__aqi-box\">\n          <div className=\"bar__aqi-num bar__aqi-num--4\"><p>151 - 200</p></div>\n          <div className=\"bar__aqi-info\"><p>不良</p></div>\n        </div>\n        <div className=\"bar__aqi-box\">\n          <div className=\"bar__aqi-num bar__aqi-num--5\"><p>201 - 300</p></div>\n          <div className=\"bar__aqi-info\"><p>糟糕</p></div>\n        </div>\n        <div className=\"bar__aqi-box\">\n          <div className=\"bar__aqi-num bar__aqi-num--6\"><p>301 - 400</p></div>\n          <div className=\"bar__aqi-info\"><p>危害</p></div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Bar;","import React from 'react';\n\nconst CardColor = ({aqi, color}) => {\n\n  return (\n    <div className={`cardColor__container ${color}`}>\n      <p>{aqi}</p>\n    </div>\n  )\n}\n\nexport default CardColor;","import React from 'react';\nimport CardColor from './CardColor';\n\nconst Card = ({district, aqi, setSelectedCard, data, color}) => {\n\n  const selectedCardHandler = (data) => {\n    setSelectedCard(data);\n  }\n\n  return (\n    <div className=\"card__container\" onClick={() => selectedCardHandler(data)}>\n      <div className=\"card__district\">\n        <h3>{district}</h3>\n      </div>\n      <div className=\"card__aqi\">\n        <CardColor aqi={aqi} color={color}/>\n      </div>\n    </div>\n  )\n}\n\nexport default Card;","import React from 'react';\nimport Card from './Card';\n\nconst CardList = ({dataSelected, setSelectedCard}) => {\n\n  return (\n    <div className=\"cardList__container\">\n      {dataSelected.map(data => <Card key={data.SiteId} district={data.SiteName} aqi={data.AQI} setSelectedCard={setSelectedCard} data={data} color={data.color}/>)}\n    </div>\n  )\n}\n\nexport default CardList;","import React from 'react';\nimport Card from './Card';\n\nconst SelectedCard = ({selectedCard}) => {\n  \n  return (\n    <div className=\"selectedCard__container\">\n      <div className=\"selectedCard__district\">\n        <Card district={selectedCard.SiteName} aqi={selectedCard.AQI} color={selectedCard.color}/>\n      </div>\n      <div className=\"selectedCard__pollutions\">\n        <div className=\"selectedCard__pollution\">\n          <p className=\"selectedCard__name\">臭氧</p>\n          <p className=\"selectedCard__unit\">O3 (ppb)</p>\n          <p className=\"selectedCard__aqi\">{selectedCard.O3}</p>\n        </div>\n        <div className=\"selectedCard__pollution\">\n          <p className=\"selectedCard__name\">懸浮微粒</p>\n          <p className=\"selectedCard__unit\">PM10 (μg/m3)</p>\n          <p className=\"selectedCard__aqi\">{selectedCard.PM10}</p>\n        </div>\n        <div className=\"selectedCard__pollution\">\n          <p className=\"selectedCard__name\">細懸浮微粒</p>\n          <p className=\"selectedCard__unit\">PM2.5 (μg/m3)</p>\n          <p className=\"selectedCard__aqi\">{selectedCard[\"PM2.5\"]}</p>\n        </div>\n        <div className=\"selectedCard__pollution\">\n          <p className=\"selectedCard__name\">一氧化碳</p>\n          <p className=\"selectedCard__unit\">CO (ppm)</p>\n          <p className=\"selectedCard__aqi\">{selectedCard.CO}</p>\n        </div>\n        <div className=\"selectedCard__pollution\">\n          <p className=\"selectedCard__name\">二氧化硫</p>\n          <p className=\"selectedCard__unit\">SO2 (ppb)</p>\n          <p className=\"selectedCard__aqi\">{selectedCard.SO2}</p>\n        </div>\n        <div className=\"selectedCard__pollution\">\n          <p className=\"selectedCard__name\">二氧化氮</p>\n          <p className=\"selectedCard__unit\">NO2 (ppb)</p>\n          <p className=\"selectedCard__aqi\">{selectedCard.NO2}</p>\n        </div>\n      </div>\n      <p className=\"selectedCard__source\">資料來源：行政院環保署</p>\n    </div>\n  )\n}\n\nexport default SelectedCard;","import React, {useState, useEffect} from 'react';\nimport CardList from './CardList';\nimport SelectedCard from './SelectedCard';\n\nconst Chart = ({countySelected, data, setSelectedCard, selectedCard}) => {\n\n  const [dataSelected, setDataSelected] = useState([]);\n  //有選擇 county 以及沒有選擇 county 的 CardList 顯示設定\n  useEffect(() => {\n    const defaultSelectedCounty = data.filter(item => item.County === \"新北市\")\n\n    ! countySelected\n    ? setDataSelected(defaultSelectedCounty)\n    : (setDataSelected(data.filter(item => item.County === countySelected)));\n\n  }, [data, countySelected])\n\n  return (\n    <div className=\"chart__container\">\n      <h3 className=\"chart__location\">{countySelected || `新北市`}</h3>\n      <div className=\"chart__update-time\"><span>更新時間：</span>{selectedCard.PublishTime}</div>\n      <section className=\"chart__selected-card\">\n        <SelectedCard selectedCard={selectedCard}/>\n      </section>\n      <section className=\"chart__cardList\">\n        <CardList dataSelected={dataSelected} setSelectedCard={setSelectedCard}/>\n      </section>\n    </div>\n  )\n}\n\nexport default Chart;","import React, {useEffect, useState} from 'react';\nimport Bar from './Bar';\nimport Chart from './Chart';\n\nconst App = () => {\n\n  const [counties, setCounties] = useState([]);//所有 county 名稱\n  const [countySelected, setCountySelected] = useState('');//使用者所選擇的 county\n  const [dataWithColor, setDataWithColor] = useState([]);//所有的資料加入「顏色」\n  const [selectedCard, setSelectedCard] = useState({});//使用者所選擇的 county、district 的資料\n\n  useEffect(() => {\n\n    const getData = async() => {\n      try {\n        //要全部的資料\n        const response = await fetch('https://data.epa.gov.tw/api/v1/aqx_p_432?offset=0&limit=100&api_key=d15d5d72-05e5-41c0-ad3b-65eb8555311e');\n        const data = await response.json();\n\n        //把 empty string 改成 -\n        data.records.map((record) => {\n          return Object.keys(record).forEach(k => record[k] = record[k] === '' ? '-' : record[k])\n        })\n\n        //篩選出不重複的 county\n        const repeatedCounties = data.records.map((record) => record.County)\n        const nonRepeatedCounties = repeatedCounties.filter((item, index, arr) => {return arr.indexOf(item) === index})\n        setCounties(nonRepeatedCounties);\n\n        //將 aqi 顏色匯入資料\n        const dataWithColors = data.records.map((record) => {\n          if(record.AQI < 51) {\n            return {...record, color: \"green\"}\n          } else if(50 < record.AQI && record.AQI < 100) {\n            return {...record, color: \"yellow\"}\n          } else if (100 < record.AQI && record.AQI < 151) {\n            return {...record, color: \"orange\"}\n          } else if (150 < record.AQI && record.AQI < 201) {\n            return {...record, color: \"red\"}\n          } else if (200 < record.AQI && record.AQI < 301) {\n            return {...record, color: \"purple\"}\n          } else if ( 300 < record.AQI && record.AQI < 401) {\n            return {...record, color: \"brown\"}\n          } else {\n            return {...record, color: \"pink\"}\n          }\n        })\n        setDataWithColor(dataWithColors);\n\n        //有選擇 county 以及沒有選擇 county 的 SelectedCard 顯示設定\n        const defaultSelectedCounty = dataWithColors.filter(data => data.County === \"新北市\");\n        const notdefault = dataWithColors.filter(data => data.County === countySelected);\n        ! countySelected\n        ? setSelectedCard(defaultSelectedCounty[0])\n        : setSelectedCard(notdefault[0])\n      }\n      catch(err) {\n        setDataWithColor(null);\n        console.log(err);\n      }\n    }\n    getData();\n\n\n  }, [countySelected])\n\n  return(\n    <div className=\"app__wrapper\">\n      <div className=\"app__container\">\n        <section className=\"app__title\">\n          <h1>臺灣空氣品質查詢</h1>\n          <i className=\"fas fa-search\"></i>\n        </section>\n        { !dataWithColor ?\n        <div>抱歉！資料每整點更新一次，請您稍候再嘗試，感謝。</div> :\n        <div>\n          <section className=\"app__bar\">\n            <Bar counties={counties} countySelected={countySelected} setCountySelected={setCountySelected}/>\n          </section>\n          <section className=\"app__chart\">\n            <Chart countySelected={countySelected} data={dataWithColor} selectedCard={selectedCard} setSelectedCard={setSelectedCard}/>\n          </section>\n        </div>\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport './css/index.css'\n\nReactDOM.render(\n  <App/>,\n  document.querySelector('#root')\n);"],"sourceRoot":""}